<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>民宿管理系统注册</title>
    <link rel="stylesheet" href="../css/login.css">
</head>
<body ng-app="myApp" ng-controller="myController" ng-init="findAll()">
    <div class="dowebok">
        <div class="logo"></div>
        <!--form start-->
        <div class="form-item">
            <input id="username" ng-model="login.username" name="username" type="text" autocomplete="off" placeholder="用户名">
            <p class="tip1">请输入合法的用户名</p>
        </div>
        <div class="form-item">
            <input id="password" ng-model="login.password" type="password" autocomplete="off" placeholder="登录密码">
            <p class="tip2">密码不正确</p>
        </div>
        <div class="form-item"><button id="submit" ng-click="logins()" >注册</button></div>
        <div class="reg-bar">
            <a class="reg" href="javascript:">立即登录</a>
            <a class="forget" href="javascript:">忘记密码</a>
        </div>
        <!--from end-->
    </div>

    <script src="../js/jquery.min.js"></script>
    <script src="../js/angular.min.js"></script>
    <script>
        var app=angular.module('myApp',[]); //定义了一个叫myApp的模块
        //定义控制器
        app.controller('myController',function($scope,$http){
            $scope.logins=function(){
                $http.post('/api/login',$scope.login).success(
                    function(response){
                        if (response=="该用户名不存在"){
                            $('.tip1').show();
                        }else if (response=="密码错误") {
                            $('.tip2').show();
                        }else {
                            window.location.href="/api/success";
                        }

                    }
                );
            }
        });
    </script>
</body>
</html>